<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · GenomeGraphs.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="GenomeGraphs.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">GenomeGraphs.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Installation-1"><span>Installation</span></a></li><li><a class="tocitem" href="#Creating-your-first-WorkSpace-1"><span>Creating your first WorkSpace</span></a></li><li><a class="tocitem" href="#Constructing-your-first-de-Bruijn-graph-1"><span>Constructing your first de-Bruijn graph</span></a></li><li><a class="tocitem" href="#Using-the-NodeView-interface-1"><span>Using the NodeView interface</span></a></li></ul></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/Graphs/">Graphs submodule</a></li><li><a class="tocitem" href="../../api/MerTools/">MerTools submodule</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/BioJulia/GenomeGraphs.jl/blob/master/docs/src/man/guide.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-Guide-1"><a class="docs-heading-anchor" href="#Package-Guide-1">Package Guide</a><a class="docs-heading-anchor-permalink" href="#Package-Guide-1" title="Permalink"></a></h1><h2 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h2><p>GenomeGraphs is made available to install through BioJulia&#39;s package registry.</p><p>Julia by default only watches the &quot;General&quot; package registry, so before you start, you should add the BioJulia package registry.</p><p>Start a julia terminal, hit the <code>]</code> key to enter pkg mode (you should see the prompt change from <code>julia&gt;</code> to <code>pkg&gt;</code>), then enter the following command:</p><pre><code class="language-none">pkg&gt; registry add https://github.com/BioJulia/BioJuliaRegistry.git</code></pre><p>After you&#39;ve added the registry, you can install GenomeGraphs from the julia REPL. Press <code>]</code> to enter pkg mode again, and enter the following:</p><pre><code class="language-none">pkg&gt; add GenomeGraphs</code></pre><p>If you are interested in the cutting edge of the development, please check out the master branch to try new features before release.</p><h2 id="Creating-your-first-WorkSpace-1"><a class="docs-heading-anchor" href="#Creating-your-first-WorkSpace-1">Creating your first WorkSpace</a><a class="docs-heading-anchor-permalink" href="#Creating-your-first-WorkSpace-1" title="Permalink"></a></h2><p>You can create an empty genome graph workspace with the empty constructor:</p><pre><code class="language-julia">using GenomeGraphs

ws = WorkSpace()</code></pre><p>Obviously this workspace is quite useless on its own!</p><p>You need a genome graph and information to project onto it before you can do any exploration or analysis. There are a few ways to get your first graph:</p><ol><li>Construct a de-Bruijn graph from raw sequencing reads.</li><li>Load a graph (such as produced from another assembler) from a GFAv1 file</li></ol><h2 id="Constructing-your-first-de-Bruijn-graph-1"><a class="docs-heading-anchor" href="#Constructing-your-first-de-Bruijn-graph-1">Constructing your first de-Bruijn graph</a><a class="docs-heading-anchor-permalink" href="#Constructing-your-first-de-Bruijn-graph-1" title="Permalink"></a></h2><p>Let&#39;s see how to do option number 1, and construct a de-Bruijn graph from raw sequencing reads. This can be achieved with a few simple steps:</p><ol><li>Prepare the sequencing reads &amp; build a datastore.</li><li>Add the read datastore to a WorkSpace.</li><li>Run the dbg process.</li><li>Run the tip removal process.</li></ol><h3 id="Preparing-the-sequencing-reads-1"><a class="docs-heading-anchor" href="#Preparing-the-sequencing-reads-1">Preparing the sequencing reads</a><a class="docs-heading-anchor-permalink" href="#Preparing-the-sequencing-reads-1" title="Permalink"></a></h3><p>Let&#39;s prepare the sequencing reads.</p><p><code>WorkSpaces</code> store sequencing reads in <code>ReadDatastore</code>s, provided by the <a href="https://github.com/BioJulia/ReadDatastores.jl">ReadDatastores.jl</a> package.</p><p>GenomeGraphs uses (and re-exports types and methods from) <code>ReadDatastores</code>. <code>ReadDatastores</code> is a standalone package in its own right (although it was built in the first place for GenomeGraphs).</p><p>If you want to use <code>ReadDatastores</code> as a standalone package in another Bio(Julia) based project (and we recommend you do - the data stores are more efficient than text files), you can find standalone docs for the package <a href="https://biojulia.net/ReadDatastores.jl/latest/">here</a>. Some types and methods documented there, are repeated in the Library section of this manual here, for convenience.</p><p>Anyway, let&#39;s see how to build a paired end reads datastore!</p><pre><code class="language-julia">using GenomeGraphs

fwq = open(FASTQ.Reader, &quot;test/ecoli_pe_R1.fastq&quot;)
rvq = open(FASTQ.Reader, &quot;test/ecoli_pe_R2.fastq&quot;)

ds = PairedReads(fwq, rvq, &quot;ecoli-test-paired&quot;, &quot;my-ecoli&quot;, 250, 300, 0, FwRv)</code></pre><p>Here &quot;ecoli-test-paired&quot; is provided as the base filename of the datastore, the datastore is given the name of &quot;my-ecoli&quot;, this name will be used to identify it in the workspace later.</p><p>The minimum length for the reads is set at 250 base pairs, and the maximum length is set to 300 base pairs. Reads that are too short will be discarded, reads that are too long are truncated.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The insert size of the paired reads to 0, since I&#39;m not sure of it and right now the value is optional.</p></div></div><p>I set the orientation of the paired reads to <code>FwRv</code>. This is the default, and means for every pair of reads, read 1 is oriented in the forward direction, and read 2 is oriented backwards (forwards on the opposite strand). This orientation distinguishes regular paired-end reads from other paired read types like Long Mate Pairs.</p><h3 id="Add-datastore-to-the-WorkSpace-1"><a class="docs-heading-anchor" href="#Add-datastore-to-the-WorkSpace-1">Add datastore to the WorkSpace</a><a class="docs-heading-anchor-permalink" href="#Add-datastore-to-the-WorkSpace-1" title="Permalink"></a></h3><p>Now the datastore is created, it can be added to a workspace.</p><pre><code class="language-julia">ws = WorkSpace()
add_paired_reads!(ws, ds)</code></pre><h3 id="Run-the-dbg-process-1"><a class="docs-heading-anchor" href="#Run-the-dbg-process-1">Run the <code>dbg</code> process</a><a class="docs-heading-anchor-permalink" href="#Run-the-dbg-process-1" title="Permalink"></a></h3><p>GenomeGraphs comes with some very high-level methods in it&#39;s API, that we like to call <em>processes</em>. They perform some critical and common task as part of a larger workflow. Examples include constructing a de-Bruijn graph from sequencing reads, mapping reads to a graph, kmer counting and so on.</p><p>Once a workspace has an attached read datastore, you can run the dbg process to produce a first de-Bruijn graph of the genome.</p><pre><code class="language-julia">dbg!(BigDNAMer{61}, 10, ws, &quot;my-ecoli&quot;)</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Some steps of this process, especially the Kmer counting steps, may take a long time for big inputs. No parallelism or batching to disk is used currently (although it is planned). This process should take just about a minute for E.coli paired end reads with a decent coverage. So, be warned, for big stuff, performance may suuuuuuucck in these early days!</p></div></div><h3 id="Run-the-remove_tips-process-1"><a class="docs-heading-anchor" href="#Run-the-remove_tips-process-1">Run the <code>remove_tips</code> process</a><a class="docs-heading-anchor-permalink" href="#Run-the-remove_tips-process-1" title="Permalink"></a></h3><p>Now you have a raw compressed de-Bruijn assembly graph. You can start to use it for analyses, and also try to improve its structure and resolve parts of the graph that represent error, repetitive content, and so forth. Some of these structures can be identified and resolved using only the topology of the graph, some require additional information sources (linked reads / long reads / and so on), to be incorporated into the workspace first.</p><p>Here let&#39;s see how to resolve a common structure, using only the graph topology.</p><p>Let&#39;s fix the tips of the graph.</p><p>Tips looks like this:</p><p><img src="../tips.jpeg" alt="tips"/></p><p>See how a piece of the assembly which should be one long stretch of sequence is broken into 3 pieces (red) because of the existence of two tips (blue). Such tips are defined topologically as very short segments which have one incoming neighbour, and no outgoing neighbour.</p><p>Tips are caused by sequencer errors that occur at the end of reads, because the sequencing by synthesis technique becomes more error prone over time; reagents are consumed and products generated as time progresses, making the base detection more difficult. Hence errors occur at the ends of reads, and erroneous kmers from the read ends are unlikely to have forward neighbours, and they end up forming tip nodes when they are incorporated into the de-Bruijn graph. </p><p>you can remove these tips and improve the contiguity of the graph by using the <code>remove_tips!</code> process.</p><pre><code class="language-julia">remove_tips!(ws, 200)</code></pre><p>The value of 200 provided is a size (in base pairs) threshold: Nodes are considered tips only if they have one ingoing neighbour, no outgoing neighbours, and are (in this case) smaller than 200 base pairs in length.</p><p>Once this process is finished you will have a collapsed de-Bruijn graph with the tips removed.</p><h2 id="Using-the-NodeView-interface-1"><a class="docs-heading-anchor" href="#Using-the-NodeView-interface-1">Using the NodeView interface</a><a class="docs-heading-anchor-permalink" href="#Using-the-NodeView-interface-1" title="Permalink"></a></h2><p>Graphs can be complicated data structures. If you want an in depth explanation of the data-structure used to represent genome graphs, then head <a href="man/notyet">here</a>.</p><p>However, most people should not have to care about the internal structure of the graph.</p><p>To make things as simple as possible, the <code>NodeView</code> type provides a single entry point for node-centric analyses. The <code>NodeView</code> wraps a point to a workspace&#39;s graph and contains a node id. A <code>NodeView</code> gives you acces to a node&#39;s underlying sequence, the nodes neighbouring nodes in the forward and backward directions, the reads mapped to a node, and kmer coverage over the node.</p><p>To get a <code>NodeView</code> of a node, use the <code>node</code> method on a <code>WorkSpace</code>, providing a node id number. A positive ID denotes a view of the node traversing it in the forward (canonical) direction. A negative ID denotes a view of the node, traversing it in the reverse complement direction.   </p><pre><code class="language-julia">julia&gt; n = node(ws, 3)
A view of a graph node (node: 3, graph: sdg):
  AAAAAACCTCCGCAACCCCATGTTTTCACATAACTGTTG…GCCATGACCGGCTGGCTGTCAGGCTGTCACTGATAATCA

</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../../api/Graphs/">Graphs submodule »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 24 December 2019 01:00">Tuesday 24 December 2019</span>. Using Julia version 1.3.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
